<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="factura_personalizada">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <xpath expr="//t[@t-call='web.external_layout']" position="replace">
                        <div class="header">
                            <xpath expr="." position="inside">
                                <link href="/factura_de_venta/static/src/css/style.css" rel="stylesheet"/>
                            </xpath>
                            <div class="row">
                                <div class="col-3">
                                    <img t-att-src="image_data_uri(o.company_id.logo)" style="max-width:90%;"
                                         alt="Company Logo"/>
                                </div>
                                <div class="col-6 text-center">
                                    <span t-esc="o._companyLetraMayuscula()"/>
                                    <br/>
                                    <span t-esc="o._direccion_company()"/>
                                    No.
                                    <span t-esc="o._direccion_company2()"/>
                                    <br/>
                                    <span t-esc="o._direccion2_company()"/>
                                    <br/>
                                    <span t-esc="o._RFC_company()"/>
                                    <br/>
                                    <span t-esc="o._telefono_company()"/>
                                    <br/>
                                    <span t-esc="o._correo_company()"/>
                                    <span></span>
                                    <span t-esc="o._website_company()"/>
                                    <br/>
                                    <span t-esc="o._company_register()"/>
                                    <br/>
                                </div>
                                <div class="col-3">
                                    <div class="row">
                                        <div class="col-12 text-right">
                                            <ul class="list-inline">
                                                <li>Page<span class="page"/>/
                                                    <span class="topage"/>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <table id="tabla1" class="text-center">
                                        <thead>
                                            <tr>
                                                <td id="letra1">FACTURA</td>
                                            </tr>
                                            <tr>
                                                <td id="letra4">
                                                    <span t-field="o.name"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td id="letra1">TIPO DOCUMENTO</td>
                                            </tr>
                                            <tr>
                                                <td id="letra1">
                                                    <span t-field="o.tipo_comprobante"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td id="letra1">FECHA TIMBRADO</td>
                                            </tr>
                                            <tr>
                                                <td id="letra1">
                                                    <span t-field="o.fecha_factura"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td id="letra1">EXPEDIDO EN</td>
                                            </tr>
                                            <tr>
                                                <td id="letra1">
                                                    <span t-field="o.invoice_date"/>
                                                </td>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-12">
                                    <table id="tabla1" class="text-center">
                                        <thead>
                                            <tr>
                                                <th id="letra1" class="border_right">
                                                    No.CERTIFICADO
                                                </th>
                                                <th id="letra1" class="border_right">
                                                    No. CERTIFICADO SAT
                                                </th>
                                                <th id="letra1" class="border_right">
                                                    FOLIO FISCAL UUID
                                                </th>
                                                <th id="letra1">
                                                    USO DE CFDI:
                                                    <span t-field="o.uso_cfdi"/>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td id="letra1" class="border_right">
                                                    <span t-field="o.numero_cetificado"/>
                                                </td>
                                                <td id="letra1" class="border_right">
                                                    <span t-field="o.cetificaso_sat"/>
                                                </td>
                                                <td id="letra1" class="border_right">
                                                    <span t-field="o.folio_fiscal"/>
                                                </td>
                                                <td id="letra1">
                                                    METODO PAGO:
                                                    <span t-field="o.methodo_pago"/>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-12">
                                    <table id="tabla1" style="font-size:12px;">
                                        <tr>
                                            <td>CLIENTE</td>
                                            <td>
                                                <span t-field="o.partner_id.parent_id.name"/>
                                            </td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td class="border_right"></td>
                                            <td>Forma de pago</td>
                                            <td>
                                                <span t-field="o.forma_pago"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>DIRECCION</td>
                                            <td><span t-field="o.partner_id.parent_id.street_name"/>,
                                                <span t-field="o.partner_id.parent_id.zip"/>
                                            </td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td class="border_right"></td>
                                            <td>No Cta Pago</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>COLONIA</td>
                                            <td>
                                                <span t-field="o.partner_id.parent_id.city"/>
                                            </td>
                                            <td></td>
                                            <td>C.P.</td>
                                            <td>
                                                <span t-field="o.partner_id.parent_id.zip"/>
                                            </td>
                                            <td class="border_right"></td>
                                            <td>Dias Crédito</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>CIUDAD</td>
                                            <td><span t-field="o.partner_id.parent_id.city"/>,<span
                                                    t-field="o.partner_id.parent_id.state_id.name"/>,
                                                <span t-field="o.partner_id.parent_id.country_id.name"/>
                                            </td>
                                            <td></td>
                                            <td>No. Cliente</td>
                                            <td>
                                                <span t-field="o.partner_id.parent_id.numero_cliente"/>
                                            </td>
                                            <td class="border_right"></td>
                                            <td>Fecha Vencimiento</td>
                                            <td>
                                                <span t-field="o.invoice_payment_term_id.name"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>R.F.C.</td>
                                            <td>
                                                <span t-field="o.partner_id.parent_id.vat"/>
                                            </td>
                                            <td></td>
                                            <td>No. Proveedor</td>
                                            <td>
                                                <span t-field="o.partner_id.parent_id.numero_proveedor"/>
                                            </td>
                                            <td class="border_right"></td>
                                            <td>No. de Pedido</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td class="border_right"></td>
                                            <td>Lugar Entrega</td>
                                            <td></td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="footer">
                            <t t-if="o.folio_fiscal">
                                <div class="row">
                                    <div class="col-12">
                                        <div name="cadenas" class="row">
                                            <div class="col-3 float-left">
                                                <img t-if="o.qrcode_image"
                                                     t-att-src="'data:image/png;base64,%s' % to_text(o.qrcode_image)"
                                                     style="height: 190px;width: 190px;padding-left:10px;"/>
                                            </div>
                                            <div class="col-9 float-left" style="font-size:12px;">
                                                <!--CADENA ORIGINAL>  -->
                                                <strong>Cadena Original del Complemento digital del SAT</strong>
                                                <br/>
                                                <span t-field="o.cadena_origenal"
                                                      style="word-break:break-word;font-size:8px;"/>
                                                <br/>

                                                <strong>Sello digital del CFDI</strong>
                                                <br/>
                                                <span t-field="o.selo_digital_cdfi"
                                                      style="word-break:break-word;font-size:8px;"/>
                                                <br/>

                                                <strong>Sello del SAT</strong>
                                                <br/>
                                                <span t-field="o.selo_sat"
                                                      style="word-break:break-word;font-size:8px;"/>
                                                <br/>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </xpath>
                    <t t-call="web.external_layout">

                        <xpath expr="." position="inside">
                            <link href="/factura_de_venta/static/src/css/style.css" rel="stylesheet"/>
                        </xpath>
                        <!-- <div class="row" style="margin-top:420px;"> -->
                        <div class="row" style="margin-top:420px;">
                            <div class="col-12">
                                <table id="tabla1" style="font-size:12px;">
                                    <thead class="border_bottom">
                                        <tr>
                                            <th>CANT</th>
                                            <th>No. PARTE</th>
                                            <th></th>
                                            <th>DESCRIPCION</th>
                                            <th></th>
                                            <th>LOTE</th>
                                            <th>DESC</th>
                                            <th>P. UNITARIO</th>
                                            <th>IMPORTE</th>
                                        </tr>
                                        <tr>
                                            <th>UNIDAD</th>
                                            <th>CVE PROD. SERV</th>
                                            <th></th>
                                            <th></th>
                                            <th></th>
                                            <th>REFERENCIA</th>
                                            <th></th>
                                            <th></th>
                                            <th></th>
                                        </tr>
                                        <tr>
                                            <th>FECHA FAB.</th>
                                            <th>FECHA EMP.</th>
                                            <th></th>
                                            <th>CAJAS</th>
                                            <th></th>
                                            <th style="font-size:10px;">UNIDAD ADUANA</th>
                                            <th style="font-size:10px;">FRACC. ARANCELARIA</th>
                                            <th style="font-size:10px;">VAL. ADUANA</th>
                                            <th style="font-size:10px;">VAL. DOLARES</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="o.invoice_line_ids" t-as="l">
                                            <tr>
                                                <td>
                                                    <span t-esc="l.price_unit"/>
                                                </td>
                                                <td>
                                                    <span t-esc="l.product_id.default_code"/>
                                                </td>
                                                <td></td>
                                                <td><span t-esc="l.quantity"/>-
                                                    <span t-esc="l.product_id.name"/>
                                                </td>
                                                <td></td>
                                                <t t-if="o.cce_habilitar_cee">
                                                    <td>
                                                        <span t-field="l.product_id.unidadAduana"/>
                                                    </td>
                                                    <td>
                                                        <span t-field="l.product_id.fraccionarancelaria"/>
                                                    </td>
                                                </t>
                                                <td>
                                                    <span t-field="l.price_unit"/>
                                                </td>
                                                <td>
                                                    <span t-field="l.price_subtotal"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span t-esc="l.product_uom_id.name"/>
                                                </td>
                                                <td>
                                                    <span t-esc="l.product_id.clave_producto"/>
                                                </td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>sin dato</td>
                                                <td>sin dato</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-12">
                                <table id="tabla1" style="font-size:12px;">
                                    <tr>
                                        <td>IMPORTE TOTAL CON LETRA</td>
                                        <td></td>
                                        <td>Subtotal</td>
                                        <td></td>
                                        <td>
                                            <span t-field="o.amount_untaxed"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span t-esc="o._total_en_letra()"/>
                                            DOLARES 74/100 USD
                                        </td>
                                        <td></td>
                                        <td>Descuento</td>
                                        <td></td>
                                        <td>$0.00</td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td>$0.00</td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>ESTE DOCUMENTO ES UNA REPRESENTACION IMPRESA DE UN CFDI</td>
                                        <td></td>
                                        <td>Total</td>
                                        <td></td>
                                        <td>
                                            <span t-field="o.amount_total"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="row" style="page-break-before: always;">
                            <!-- <div class="col-12" style="margin-top:470px;"> -->
                            <div class="col-12" style="margin-top:470px;">
                                <table id="tabla1" style="font-size:12px;">
                                    <tr>
                                        <td>
                                            OPERACION VIRTUAL AL AMPARO DEL ART. 29 FRACCIÓN I DE LA LEY DEL
                                            IVA
                                            EN
                                            VIGOR Y DE LAS REGLAS 3.1.8, 4.3.21, 5.2.5 FRACCIÓN II Y 5.2.6
                                            DE
                                            LAS
                                            RGCE VIGENTES Y SUS MODIFICACIONES.
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            BORGWARNER COMERCIALIZADORA PDS S. DE R.L. DE C.V.: IMMEX
                                            310-2013,
                                            BENEFICIADORA DE ALAMBRES Y METALES, S.A. DE C.V. BAM7810201G0
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-12">
                                <table id="tabla1" style="font-size:12px;">
                                    <tr>
                                        <td colspan="11" style="font-size:20px;">
                                            Complemento de comercio exterior
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Tipo Operación:</td>
                                        <td>
                                            <span t-field="o.cce_tipooperacion"/>
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td>Clave Pendimiento:</td>
                                        <td>
                                            <span t-field="o.cce_clavedepedimento"/>
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td>Certificado Origen:</td>
                                        <td>
                                            <span t-field="o.cce_numcertificadoorigen"/>
                                        </td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>Subdivisión</td>
                                        <td>
                                            <span t-field="o.cce_subdivision"/>
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td>Incoterm</td>
                                        <td>
                                            <span t-field="o.cce_incoterm"/>
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>Total USD:</td>
                                        <td>
                                            <span t-field="o.amount_total"/>
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td>Tipo cambio:</td>
                                        <td>
                                            <span t-field="o.tipocambio"/>
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-12">
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-12">
                                <table id="tabla1" style="font-size:12px;">
                                    <tr>
                                        <td colspan="4" style="text-align: justify;">PAGARÉ SIN PROTESTO,
                                            DEBO Y
                                            PAGARÉ
                                            INCONDICIONALMENTE A BENEFICIADORA DE
                                            ALAMBRES Y METALES S.A. DE C.V. EN ESTA PLAZA O EN CUALQUIER
                                            OTRA
                                            PARTE
                                            QUE
                                            SE ME REQUIERA, INCLUSIVE DE MANERA JUDICIAL EL DIA
                                            <span t-field="o.invoice_date"/>,
                                            LA
                                            CANTIDAD DE
                                            <span t-esc="o._total_en_letra()"/>
                                            DOLARES 74/100 USD,
                                            VALOR
                                            RECIBIDO
                                            EN MERCANCIA A MI ENTERA SATISFACCION. ESTE PAGARE CAUSARÁ UN
                                            INTERES
                                            DEL
                                            5.00% MENSUAL A PARTIR DE SU EXPEDICIÓN DUPLICANDOSE EN CASO DE
                                            DEMORA.
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="4" class="text-center">IRAPUATO, GTO. A
                                            <span t-esc="o._fecha_actual()"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td class="text-center">
                                            _______________________________________________
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-center">
                                            _______________________________________________
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="text-center">NOMBRE</td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-center">FIRMA</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-12">

                            </div>
                        </div>

                    </t>
                </t>
            </t>
        </template>

        <record id="paperformat_letter_invoice_sale" model="report.paperformat">
            <field name="name">Factura de Venta</field>
            <field name="default" eval="True"/>
            <field name="format">Letter</field>
            <field name="page_height">0</field>
            <field name="page_width">0</field>
            <field name="orientation">Portrait</field>
            <field name="margin_top">10</field>
            <field name="margin_bottom">10</field>
            <field name="margin_left">3</field>
            <field name="margin_right">3</field>
            <field name="header_line" eval="False"/>
            <field name="header_spacing">4</field>
            <field name="dpi">90</field>
        </record>

        <report id="report_print_factura_personalizada"
                string="Factura Personalizada"
                model="account.move"
                report_type="qweb-pdf"
                name="factura_de_venta.factura_personalizada"
                paperformat="factura_de_venta.paperformat_letter_invoice_sale"/>

    </data>
</odoo>
